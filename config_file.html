<!doctype html>
<html class="no-js" lang="zh-CN" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="索引" href="genindex.html" /><link rel="search" title="搜索" href="search.html" /><link rel="next" title="内联配置(Inline configuration)" href="inline_config.html" /><link rel="prev" title="mypy命令行(command line)" href="command_line.html" />

    <!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>mypy 配置文件(mypy configuration file) - mypy 1.13.0+dev.8a8d58c8ce71cf4aa7a622681da888eeb514a8b3 文档</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">mypy 1.13.0+dev.8a8d58c8ce71cf4aa7a622681da888eeb514a8b3 文档</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/mypy_light.svg" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">mypy 1.13.0+dev.8a8d58c8ce71cf4aa7a622681da888eeb514a8b3 文档</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="搜索" name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">第一步</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">入门</a></li>
<li class="toctree-l1"><a class="reference internal" href="cheat_sheet_py3.html">类型提示备忘单</a></li>
<li class="toctree-l1"><a class="reference internal" href="existing_code.html">在现有代码库中使用 mypy</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">类型系统参考</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="builtin_types.html">内置类型(Built-in)</a></li>
<li class="toctree-l1"><a class="reference internal" href="type_inference_and_annotations.html">类型推断和类型注解(annotations)</a></li>
<li class="toctree-l1"><a class="reference internal" href="kinds_of_types.html">类型的种类(kinds)</a></li>
<li class="toctree-l1"><a class="reference internal" href="class_basics.html">Class 基础(basics)</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtime_troubles.html">运行时的注解问题(Annotation issues)</a></li>
<li class="toctree-l1"><a class="reference internal" href="protocols.html">协议(Protocol)与结构化子类型</a></li>
<li class="toctree-l1"><a class="reference internal" href="dynamic_typing.html">动态类型代码(Dynamically)</a></li>
<li class="toctree-l1"><a class="reference internal" href="type_narrowing.html">类型缩小(narrowing)</a></li>
<li class="toctree-l1"><a class="reference internal" href="duck_type_compatibility.html">鸭子类型兼容性</a></li>
<li class="toctree-l1"><a class="reference internal" href="stubs.html">存根文件(Stub)</a></li>
<li class="toctree-l1"><a class="reference internal" href="generics.html">泛型(Generics)</a></li>
<li class="toctree-l1"><a class="reference internal" href="more_types.html">更多类型</a></li>
<li class="toctree-l1"><a class="reference internal" href="literal_types.html">字面量类型(Literal types)和枚举(Enums)</a></li>
<li class="toctree-l1"><a class="reference internal" href="typed_dict.html">TypedDict</a></li>
<li class="toctree-l1"><a class="reference internal" href="final_attrs.html">最终名称, 方法和类(Final)</a></li>
<li class="toctree-l1"><a class="reference internal" href="metaclasses.html">元类(Metaclasses)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">配置和运行 mypy</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="running_mypy.html">运行 mypy 和管理导入(imports)</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_line.html">mypy命令行(command line)</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">mypy 配置文件(mypy configuration file)</a></li>
<li class="toctree-l1"><a class="reference internal" href="inline_config.html">内联配置(Inline configuration)</a></li>
<li class="toctree-l1"><a class="reference internal" href="mypy_daemon.html">Mypy 守护进程 (mypy 服务)</a></li>
<li class="toctree-l1"><a class="reference internal" href="installed_packages.html">使用已安装的包(Using installed packages)</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending_mypy.html">扩展和集成 mypy(Extending and integrating mypy)</a></li>
<li class="toctree-l1"><a class="reference internal" href="stubgen.html">自动存根生成(Automatic stub generation) (stubgen)</a></li>
<li class="toctree-l1"><a class="reference internal" href="stubtest.html">自动化存根测试(Automatic stub testing)(stubtest)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">其他</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="common_issues.html">常见问题及解决方案(Common issues and solutions)</a></li>
<li class="toctree-l1"><a class="reference internal" href="supported_python_features.html">支持的 Python 特性(Supported Python features)</a></li>
<li class="toctree-l1"><a class="reference internal" href="error_codes.html">错误代码(Error codes)</a></li>
<li class="toctree-l1"><a class="reference internal" href="error_code_list.html">默认启用的错误代码(Error codes enabled by default)</a></li>
<li class="toctree-l1"><a class="reference internal" href="error_code_list2.html">可选检查的错误代码(Error codes for optional checks)</a></li>
<li class="toctree-l1"><a class="reference internal" href="additional_features.html">附加功能(Additional features)</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">常见问题解答(Frequently Asked Questions)</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Mypy 版本说明</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">项目链接</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/python/mypy">GitHub</a></li>
<li class="toctree-l1"><a class="reference external" href="https://mypy-lang.org/">Website</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/python/mypy/blob/master/docs/source/config_file.rst?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/python/mypy/edit/master/docs/source/config_file.rst" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="mypy-mypy-configuration-file">
<span id="config-file"></span><h1>mypy 配置文件(mypy configuration file)<a class="headerlink" href="#mypy-mypy-configuration-file" title="Link to this heading">¶</a></h1>
<p>Mypy 具有很高的可配置性。这在将类型引入现有代码库时尤其有用。有关该情况的具体建议，请参见 <a class="reference internal" href="existing_code.html#existing-code"><span class="std std-ref">在现有代码库中使用 mypy</span></a>。</p>
<p>Mypy 支持从文件读取配置设置，优先顺序如下：</p>
<blockquote>
<div><ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">./mypy.ini</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">./.mypy.ini</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">./pyproject.toml</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">./setup.cfg</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$XDG_CONFIG_HOME/mypy/config</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~/.config/mypy/config</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~/.mypy.ini</span></code></p></li>
</ol>
</div></blockquote>
<p>重要的是要理解，配置文件不会合并，因为这会导致歧义。命令行标志 <a class="reference internal" href="command_line.html#cmdoption-mypy-config-file"><code class="xref std std-option docutils literal notranslate"><span class="pre">--config-file</span></code></a> 具有最高优先级，必须正确；否则 mypy 将报告错误并退出。在没有命令行选项的情况下，mypy 将按上述优先顺序查找配置文件。</p>
<p>大多数标志与 <a class="reference internal" href="command_line.html#command-line"><span class="std std-ref">命令行标志</span></a> 密切对应，但在标志名称上存在一些差异，有些标志可能根据正在处理的模块采用不同的值。</p>
<p>一些标志支持用户主目录和环境变量扩展。要引用用户主目录，请在路径开头使用 <code class="docutils literal notranslate"><span class="pre">~</span></code>。要扩展环境变量，请使用 <code class="docutils literal notranslate"><span class="pre">$VARNAME</span></code> 或 <code class="docutils literal notranslate"><span class="pre">${VARNAME}</span></code>。</p>
<section id="config-file-format">
<h2>配置文件格式(Config file format)<a class="headerlink" href="#config-file-format" title="Link to this heading">¶</a></h2>
<p>配置文件格式是常见的 <a class="reference external" href="https://docs.python.org/zh-cn/3/library/configparser.html" title="（在 Python v3.13）"><span class="xref std std-doc">ini 文件</span></a> 格式。它应包含方括号中的部分名称和形式为 <cite>NAME = VALUE</cite> 的标志设置。注释以 <code class="docutils literal notranslate"><span class="pre">#</span></code> 字符开头。</p>
<ul>
<li><p>必须存在名为 <code class="docutils literal notranslate"><span class="pre">[mypy]</span></code> 的部分。这指定了全局标志。</p></li>
<li><p>还可以存在名为 <code class="docutils literal notranslate"><span class="pre">[mypy-PATTERN1,PATTERN2,...]</span></code> 的附加部分，其中 <code class="docutils literal notranslate"><span class="pre">PATTERN1</span></code>、<code class="docutils literal notranslate"><span class="pre">PATTERN2</span></code> 等是完全限定模块名称的逗号分隔模式，某些组件可以用 '*' 字符替代（例如 <code class="docutils literal notranslate"><span class="pre">foo.bar</span></code>、<code class="docutils literal notranslate"><span class="pre">foo.bar.*</span></code>、<code class="docutils literal notranslate"><span class="pre">foo.*.baz</span></code> )。这些部分指定仅适用于模块名称匹配至少一个模式的附加标志。</p>
<p>形式为 <code class="docutils literal notranslate"><span class="pre">qualified_module_name</span></code> 的模式仅匹配命名模块，而 <code class="docutils literal notranslate"><span class="pre">dotted_module_name.*</span></code> 匹配 <code class="docutils literal notranslate"><span class="pre">dotted_module_name</span></code> 和任何子模块（因此 <code class="docutils literal notranslate"><span class="pre">foo.bar.*</span></code> 会匹配 <code class="docutils literal notranslate"><span class="pre">foo.bar</span></code>、<code class="docutils literal notranslate"><span class="pre">foo.bar.baz</span></code> 和 <code class="docutils literal notranslate"><span class="pre">foo.bar.baz.quux</span></code> )。</p>
<p>模式也可以是“非结构化”的通配符，其中星号可以出现在名称的中间（例如 <code class="docutils literal notranslate"><span class="pre">site.*.migrations.*</span></code> )。星号匹配零个或多个模块组件（因此 <code class="docutils literal notranslate"><span class="pre">site.*.migrations.*</span></code> 可以匹配 <code class="docutils literal notranslate"><span class="pre">site.migrations</span></code> )。</p>
<p id="config-precedence">当选项冲突时，配置的优先顺序为：</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>在源文件中的 <a class="reference internal" href="inline_config.html#inline-config"><span class="std std-ref">内联配置</span></a></p></li>
<li><p>具有具体模块名称的部分( <code class="docutils literal notranslate"><span class="pre">foo.bar</span></code> )</p></li>
<li><p>具有“非结构化”通配符模式的部分( <code class="docutils literal notranslate"><span class="pre">foo.*.baz</span></code> )，
在配置文件中后面的部分覆盖前面的部分。</p></li>
<li><p>具有“结构化”通配符模式的部分( <code class="docutils literal notranslate"><span class="pre">foo.bar.*</span></code> )，
更具体的部分覆盖更一般的部分。</p></li>
<li><p>命令行选项。</p></li>
<li><p>顶层配置文件选项。</p></li>
</ol>
</div></blockquote>
</li>
</ul>
<p>“结构化”模式（按特异性）和“非结构化”模式（按文件中的顺序）之间的优先级差异是不幸的，并且在未来版本中可能会改变。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p><a class="reference internal" href="#confval-warn_unused_configs"><code class="xref std std-confval docutils literal notranslate"><span class="pre">warn_unused_configs</span></code></a> 标志可能对调试拼写错误的部分名称有用。</p>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>配置标志在不同版本之间可能会发生变化。</p>
</div>
</section>
<section id="per-module-and-global-options">
<h2>单个模块和全局选项(Per-module and global options)<a class="headerlink" href="#per-module-and-global-options" title="Link to this heading">¶</a></h2>
<p>某些配置选项可以全局设置（在 <code class="docutils literal notranslate"><span class="pre">[mypy]</span></code> 部分）或逐模块设置（在 <code class="docutils literal notranslate"><span class="pre">[mypy-foo.bar]</span></code> 这样的部分）。</p>
<p>如果您同时为全局和特定模块设置了选项，模块配置选项将具有优先权。这使您能够设置全局默认值并在逐模块的基础上覆盖它们。如果多个模式部分与某个模块匹配，<a class="reference internal" href="#config-precedence"><span class="std std-ref">将使用最具体部分的选项</span></a>，以解决不一致的地方。</p>
<p>一些其他选项，如其描述中所述，仅能在全局部分( <code class="docutils literal notranslate"><span class="pre">[mypy]</span></code> )中设置。</p>
</section>
<section id="inverting-option-values">
<h2>反转选项值(Inverting option values)<a class="headerlink" href="#inverting-option-values" title="Link to this heading">¶</a></h2>
<p>取布尔值的选项可以通过在名称前加 <code class="docutils literal notranslate"><span class="pre">no_</span></code> 或（在适用时）将前缀从 <code class="docutils literal notranslate"><span class="pre">disallow</span></code> 变更为 <code class="docutils literal notranslate"><span class="pre">allow</span></code> （反之亦然）来反转。</p>
</section>
<section id="mypy-ini-example">
<h2><code class="docutils literal notranslate"><span class="pre">mypy.ini</span></code> 示例 (Example)<a class="headerlink" href="#mypy-ini-example" title="Link to this heading">¶</a></h2>
<p>以下是一个 <code class="docutils literal notranslate"><span class="pre">mypy.ini</span></code> 文件的示例。要使用此配置文件，请将其放置在您代码库的根目录下并运行 mypy。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="c1"># 全局选项：</span>

<span class="k">[mypy]</span>
<span class="na">warn_return_any</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">True</span>
<span class="na">warn_unused_configs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">True</span>

<span class="c1"># 每模块选项：</span>

<span class="k">[mypy-mycode.foo.*]</span>
<span class="na">disallow_untyped_defs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">True</span>

<span class="k">[mypy-mycode.bar]</span>
<span class="na">warn_return_any</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">False</span>

<span class="k">[mypy-somelibrary]</span>
<span class="na">ignore_missing_imports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">True</span>
</pre></div>
</div>
<p>此配置文件在 <code class="docutils literal notranslate"><span class="pre">[mypy]</span></code> 部分指定了两个全局选项。这两个选项将：</p>
<ol class="arabic simple">
<li><p>在函数返回被推断为类型 <code class="docutils literal notranslate"><span class="pre">Any</span></code> 的值时报告错误。</p></li>
<li><p>报告 mypy 未使用的任何配置选项。（这将帮助我们在更改配置文件时捕捉拼写错误）。</p></li>
</ol>
<p>接下来，此模块指定了三个逐模块选项。前两个选项更改 mypy 对 <code class="docutils literal notranslate"><span class="pre">mycode.foo.*</span></code> 和 <code class="docutils literal notranslate"><span class="pre">mycode.bar</span></code> 中代码的类型检查，我们在这里假设这两个模块是您编写的。最后一个配置选项更改 mypy 对 <code class="docutils literal notranslate"><span class="pre">somelibrary</span></code> 的类型检查，我们在这里假设这是您安装并导入的某个第三方库。这些选项将：</p>
<ol class="arabic simple">
<li><p>仅在 <code class="docutils literal notranslate"><span class="pre">mycode.foo</span></code> 包内选择性地禁止未类型定义的函数——即仅适用于在 <code class="docutils literal notranslate"><span class="pre">mycode/foo</span></code> 目录中定义的函数。</p></li>
<li><p>仅在 <code class="docutils literal notranslate"><span class="pre">mycode.bar</span></code> 内选择性地*禁用*“函数返回任何”警告。这将覆盖我们之前设置的全局默认值。</p></li>
<li><p>抑制在您的代码库尝试导入模块 <code class="docutils literal notranslate"><span class="pre">somelibrary</span></code> 时生成的任何错误消息。如果 <code class="docutils literal notranslate"><span class="pre">somelibrary</span></code> 是缺少类型提示的某个第三方库，这将非常有用。</p></li>
</ol>
</section>
<section id="import-discovery">
<span id="config-file-import-discovery"></span><h2>导入发现(Import discovery)<a class="headerlink" href="#import-discovery" title="Link to this heading">¶</a></h2>
<p>有关更多信息，请参见命令行文档的 <a class="reference internal" href="command_line.html#import-discovery"><span class="std std-ref">导入发现</span></a> 部分。</p>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-mypy_path">
<span class="sig-name descname"><span class="pre">mypy_path</span></span><a class="headerlink" href="#confval-mypy_path" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
<p>指定在尝试 <code class="docutils literal notranslate"><span class="pre">MYPYPATH</span></code> 环境变量中的路径后要使用的路径。如果您希望在代码库中保留存根以及配置文件，这非常有用。多个路径始终用 <code class="docutils literal notranslate"><span class="pre">:</span></code> 或 <cite>,</cite> 分隔，无论平台如何。用户主目录和环境变量将被扩展。</p>
<p>相对路径相对于 mypy 命令的工作目录处理，而不是配置文件。
使用 <code class="docutils literal notranslate"><span class="pre">MYPY_CONFIG_FILE_DIR</span></code> 环境变量来引用相对于配置文件的路径（例如 <code class="docutils literal notranslate"><span class="pre">mypy_path</span> <span class="pre">=</span> <span class="pre">$MYPY_CONFIG_FILE_DIR/src</span></code> )。</p>
<p>此选项只能在全局部分( <code class="docutils literal notranslate"><span class="pre">[mypy]</span></code> )中设置。</p>
<p><strong>注意：</strong> 在 Windows 上，使用 UNC 路径以避免使用 <code class="docutils literal notranslate"><span class="pre">:</span></code> （例如 <code class="docutils literal notranslate"><span class="pre">\\127.0.0.1\X$\MyDir</span></code> ，其中 <code class="docutils literal notranslate"><span class="pre">X</span></code> 是驱动器字母）。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-files">
<span class="sig-name descname"><span class="pre">files</span></span><a class="headerlink" href="#confval-files" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>逗号隔开的字符串列表(comma-separated list of strings)</p>
</dd>
</dl>
<p>如果在命令行上未给出，则应由 mypy 检查的路径的以逗号分隔的列表。支持使用 <a class="reference external" href="https://docs.python.org/zh-cn/3/library/glob.html#module-glob" title="（在 Python v3.13）"><code class="xref py py-mod docutils literal notranslate"><span class="pre">glob</span></code></a> 进行递归文件匹配，其中 <code class="docutils literal notranslate"><span class="pre">*</span></code> （例如 <code class="docutils literal notranslate"><span class="pre">*.py</span></code> )匹配当前目录中的文件，而 <code class="docutils literal notranslate"><span class="pre">**/</span></code> （例如 <code class="docutils literal notranslate"><span class="pre">**/*.py</span></code> )匹配当前目录以下的任何目录中的文件。用户主目录和环境变量将被扩展。</p>
<p>此选项只能在全局部分( <code class="docutils literal notranslate"><span class="pre">[mypy]</span></code> )中设置。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-modules">
<span class="sig-name descname"><span class="pre">modules</span></span><a class="headerlink" href="#confval-modules" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>逗号隔开的字符串列表(comma-separated list of strings)</p>
</dd>
</dl>
<p>如果在命令行上未给出，则应由 mypy 检查的包的以逗号分隔的列表。Mypy <em>将不会</em> 递归类型检查提供模块的任何子模块。</p>
<p>此选项只能在全局部分( <code class="docutils literal notranslate"><span class="pre">[mypy]</span></code> )中设置。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-packages">
<span class="sig-name descname"><span class="pre">packages</span></span><a class="headerlink" href="#confval-packages" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>逗号隔开的字符串列表(comma-separated list of strings)</p>
</dd>
</dl>
<p>如果在命令行上未给出，则应由 mypy 检查的包的以逗号分隔的列表。Mypy <em>将(will)</em> 递归类型检查提供包的任何子模块。此标志与 <a class="reference internal" href="#confval-modules"><code class="xref std std-confval docutils literal notranslate"><span class="pre">modules</span></code></a> 相同，除了此行为。</p>
<p>此选项只能在全局部分( <code class="docutils literal notranslate"><span class="pre">[mypy]</span></code> )中设置。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-exclude">
<span class="sig-name descname"><span class="pre">exclude</span></span><a class="headerlink" href="#confval-exclude" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>regular expression</p>
</dd>
</dl>
<p>匹配文件名、目录名和路径的正则表达式，mypy 应在递归发现要检查的文件时忽略这些文件。所有平台上使用正斜杠( <code class="docutils literal notranslate"><span class="pre">/</span></code> )作为目录分隔符。</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[mypy]</span>
<span class="na">exclude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">(?x)(</span>
<span class="w">    </span><span class="na">^one\.py$    # 文件名为 &quot;one.py&quot;</span>
<span class="w">    </span><span class="na">| two\.pyi$  # 或以 &quot;two.pyi&quot; 结尾的文件</span>
<span class="w">    </span><span class="na">| ^three\.   # 或以 &quot;three.&quot; 开头的文件</span>
<span class="w">  </span><span class="na">)</span>
</pre></div>
</div>
<p>制作一个排除多个文件的单一正则表达式，同时保持可读性可能是一项挑战。上述示例演示了一种方法。
<code class="docutils literal notranslate"><span class="pre">(?x)</span></code> 启用后续正则表达式的 <code class="docutils literal notranslate"><span class="pre">VERBOSE</span></code> 标志，这
<a class="reference external" href="https://docs.python.org/zh-cn/3/library/re.html#re.VERBOSE" title="（在 Python v3.13）"><code class="xref py py-data docutils literal notranslate"><span class="pre">忽略大多数空格并支持注释</span></code></a>。
上述等价于： <code class="docutils literal notranslate"><span class="pre">(^one\.py$|two\.pyi$|^three\.)</span></code>。</p>
<p>有关更多详细信息，请参见 <a class="reference internal" href="command_line.html#cmdoption-mypy-exclude"><code class="xref std std-option docutils literal notranslate"><span class="pre">--exclude</span></code></a>。</p>
<p>此选项只能在全局部分( <code class="docutils literal notranslate"><span class="pre">[mypy]</span></code> )中设置。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>请注意，TOML 的等效项略有不同。它可以是单个字符串（包括多行字符串）——视为单个正则表达式——或一个这样的字符串数组。以下 TOML 示例等同于上述 INI 示例。</p>
<p>字符串数组：</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.mypy]</span>
<span class="n">exclude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;^one</span><span class="se">\\</span><span class="s2">.py$&quot;</span><span class="p">,</span><span class="w">  </span><span class="c1"># TOML 的双引号字符串需要转义反斜杠</span>
<span class="w">    </span><span class="s1">&#39;two\.pyi$&#39;</span><span class="p">,</span><span class="w">  </span><span class="c1"># 但 TOML 的单引号字符串不需要</span>
<span class="w">    </span><span class="s1">&#39;^three\.&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>单个多行字符串：</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.mypy]</span>
<span class="n">exclude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;&#39;(?x)(</span>
<span class="s1">    ^one\.py$    # 文件名为 &quot;one.py&quot;</span>
<span class="s1">    | two\.pyi$  # 或以 &quot;two.pyi&quot; 结尾的文件</span>
<span class="s1">    | ^three\.   # 或以 &quot;three.&quot; 开头的文件</span>
<span class="s1">)&#39;&#39;&#39;</span><span class="w">  </span><span class="c1"># TOML 的单引号字符串不需要转义反斜杠</span>
</pre></div>
</div>
<p>请参见 <a class="reference internal" href="#using-a-pyproject-toml"><span class="std std-ref">使用 pyproject.toml 文件(Using a pyproject.toml file)</span></a>。</p>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-namespace_packages">
<span class="sig-name descname"><span class="pre">namespace_packages</span></span><a class="headerlink" href="#confval-namespace_packages" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>True</p>
</dd>
</dl>
<p>启用 <span class="target" id="index-0"></span><a class="pep reference external" href="https://peps.python.org/pep-0420/"><strong>PEP 420</strong></a> 风格的命名空间包。有关更多信息，请参见相应的标志 <a class="reference internal" href="command_line.html#cmdoption-mypy-no-namespace-packages"><code class="xref std std-option docutils literal notranslate"><span class="pre">--no-namespace-packages</span></code></a>。</p>
<p>此选项只能在全局部分( <code class="docutils literal notranslate"><span class="pre">[mypy]</span></code> )中设置。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-explicit_package_bases">
<span class="sig-name descname"><span class="pre">explicit_package_bases</span></span><a class="headerlink" href="#confval-explicit_package_bases" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>此标志告诉 mypy 顶级包将基于当前目录或 <code class="docutils literal notranslate"><span class="pre">MYPYPATH</span></code> 环境变量或 <a class="reference internal" href="#confval-mypy_path"><code class="xref std std-confval docutils literal notranslate"><span class="pre">mypy_path</span></code></a> 配置选项中的某个成员。此选项仅在缺少 <cite>__init__.py</cite> 时有用。有关详细信息，请参见 <a class="reference internal" href="running_mypy.html#mapping-paths-to-modules"><span class="std std-ref">将文件路径映射到模块</span></a>。</p>
<p>此选项只能在全局部分( <code class="docutils literal notranslate"><span class="pre">[mypy]</span></code> )中设置。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-ignore_missing_imports">
<span class="sig-name descname"><span class="pre">ignore_missing_imports</span></span><a class="headerlink" href="#confval-ignore_missing_imports" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>抑制关于无法解析的导入的错误消息。</p>
<p>如果在逐模块部分中使用此选项，则模块名称应与*导入的*模块名称匹配，而不是包含导入语句的模块。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-follow_imports">
<span class="sig-name descname"><span class="pre">follow_imports</span></span><a class="headerlink" href="#confval-follow_imports" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">normal</span></code></p>
</dd>
</dl>
<p>指定在找到以 <code class="docutils literal notranslate"><span class="pre">.py</span></code> 文件形式导入的模块且该模块不属于命令行提供的文件、模块和包时该怎么办。</p>
<p>四个可能的值为 <code class="docutils literal notranslate"><span class="pre">normal</span></code>、<code class="docutils literal notranslate"><span class="pre">silent</span></code>、<code class="docutils literal notranslate"><span class="pre">skip</span></code> 和 <code class="docutils literal notranslate"><span class="pre">error</span></code>。有关解释，请参见 <a class="reference internal" href="command_line.html#cmdoption-mypy-follow-imports"><code class="xref std std-option docutils literal notranslate"><span class="pre">--follow-imports</span></code></a> 命令行标志的讨论。</p>
<p>在逐模块部分中使用此选项（可能带有通配符，如本页顶部所述）是防止 mypy 检查您代码部分的好方法。</p>
<p>如果在逐模块部分中使用此选项，则模块名称应与*导入的*模块名称匹配，而不是包含导入语句的模块。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-follow_imports_for_stubs">
<span class="sig-name descname"><span class="pre">follow_imports_for_stubs</span></span><a class="headerlink" href="#confval-follow_imports_for_stubs" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>决定是否即使对于存根( <code class="docutils literal notranslate"><span class="pre">.pyi</span></code> )文件也遵循 <a class="reference internal" href="#confval-follow_imports"><code class="xref std std-confval docutils literal notranslate"><span class="pre">follow_imports</span></code></a> 设置。</p>
<p>与 <a class="reference internal" href="#confval-follow_imports"><code class="xref std std-confval docutils literal notranslate"><span class="pre">follow_imports=skip</span></code></a> 一起使用时，这可以用于抑制对来自 <code class="docutils literal notranslate"><span class="pre">typeshed</span></code> 的模块的导入，将其替换为 <code class="docutils literal notranslate"><span class="pre">Any</span></code>。</p>
<p>与 <a class="reference internal" href="#confval-follow_imports"><code class="xref std std-confval docutils literal notranslate"><span class="pre">follow_imports=error</span></code></a> 一起使用时，这可以用于将对特定 <code class="docutils literal notranslate"><span class="pre">typeshed</span></code> 模块的任何使用视为错误。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>这不支持 mypy 守护进程。</p>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-python_executable">
<span class="sig-name descname"><span class="pre">python_executable</span></span><a class="headerlink" href="#confval-python_executable" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
<p>指定要检查的 Python 可执行文件的路径，以收集可用的 <a class="reference internal" href="installed_packages.html#installed-packages"><span class="std std-ref">PEP 561 包</span></a> 列表。用户主目录和环境变量将被扩展。默认为用于运行 mypy 的可执行文件。</p>
<p>此选项只能在全局部分( <code class="docutils literal notranslate"><span class="pre">[mypy]</span></code> )中设置。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-no_site_packages">
<span class="sig-name descname"><span class="pre">no_site_packages</span></span><a class="headerlink" href="#confval-no_site_packages" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>禁用使用已安装包中的类型信息（见 <span class="target" id="index-1"></span><a class="pep reference external" href="https://peps.python.org/pep-0561/"><strong>PEP 561</strong></a>）。这还将禁用搜索可用的 Python 可执行文件。这与 <a class="reference internal" href="command_line.html#cmdoption-mypy-no-site-packages"><code class="xref std std-option docutils literal notranslate"><span class="pre">--no-site-packages</span></code></a> 命令行标志的作用相同。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-no_silence_site_packages">
<span class="sig-name descname"><span class="pre">no_silence_site_packages</span></span><a class="headerlink" href="#confval-no_silence_site_packages" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>启用报告在已安装包中生成的错误消息（有关分发类型信息的更多详细信息，请参见 <span class="target" id="index-2"></span><a class="pep reference external" href="https://peps.python.org/pep-0561/"><strong>PEP 561</strong></a>）。这些错误消息默认被抑制，因为您通常无法控制第三方代码中的错误。</p>
<p>此选项只能在全局部分（ <code class="docutils literal notranslate"><span class="pre">[mypy]</span></code> ）中设置。</p>
</dd></dl>

</section>
<section id="platform-configuration">
<h2>平台配置(Platform configuration)<a class="headerlink" href="#platform-configuration" title="Link to this heading">¶</a></h2>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-python_version">
<span class="sig-name descname"><span class="pre">python_version</span></span><a class="headerlink" href="#confval-python_version" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
<p>指定用于解析和检查目标程序的 Python 版本。字符串应为 <code class="docutils literal notranslate"><span class="pre">MAJOR.MINOR</span></code> 格式——例如 <code class="docutils literal notranslate"><span class="pre">2.7</span></code>。默认值为用于运行 mypy 的 Python 解释器的版本。</p>
<p>此选项只能在全局部分( <code class="docutils literal notranslate"><span class="pre">[mypy]</span></code> )中设置。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-platform">
<span class="sig-name descname"><span class="pre">platform</span></span><a class="headerlink" href="#confval-platform" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
<p>指定目标程序的操作系统平台，例如 <code class="docutils literal notranslate"><span class="pre">darwin</span></code> 或 <code class="docutils literal notranslate"><span class="pre">win32</span></code> （分别表示 OS X 或 Windows）。默认值为 Python 的 <a class="reference external" href="https://docs.python.org/zh-cn/3/library/sys.html#sys.platform" title="（在 Python v3.13）"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.platform</span></code></a> 变量所揭示的当前平台。</p>
<p>此选项只能在全局部分( <code class="docutils literal notranslate"><span class="pre">[mypy]</span></code> )中设置。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-always_true">
<span class="sig-name descname"><span class="pre">always_true</span></span><a class="headerlink" href="#confval-always_true" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>字符串逗号隔开的列表(comma-separated list of strings)。</p>
</dd>
</dl>
<p>指定一组变量，mypy 将视为总是为真（compile-time constants）。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-always_false">
<span class="sig-name descname"><span class="pre">always_false</span></span><a class="headerlink" href="#confval-always_false" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>字符串逗号隔开的列表(comma-separated list of strings)。</p>
</dd>
</dl>
<p>指定一组变量，mypy 将视为总是为假（compile-time constants）。</p>
</dd></dl>

</section>
<section id="disallow-dynamic-typing">
<h2>禁止动态类型(Disallow dynamic typing)<a class="headerlink" href="#disallow-dynamic-typing" title="Link to this heading">¶</a></h2>
<p>有关更多信息，请参见命令行文档的 <a class="reference internal" href="command_line.html#disallow-dynamic-typing"><span class="std std-ref">禁止动态类型</span></a> 部分。</p>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-disallow_any_unimported">
<span class="sig-name descname"><span class="pre">disallow_any_unimported</span></span><a class="headerlink" href="#confval-disallow_any_unimported" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>禁止使用来自未跟踪导入的类型（来自未跟踪导入的任何内容自动被赋予类型 <code class="docutils literal notranslate"><span class="pre">Any</span></code> )。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-disallow_any_expr">
<span class="sig-name descname"><span class="pre">disallow_any_expr</span></span><a class="headerlink" href="#confval-disallow_any_expr" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>禁止模块中所有类型为 <code class="docutils literal notranslate"><span class="pre">Any</span></code> 的表达式。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-disallow_any_decorated">
<span class="sig-name descname"><span class="pre">disallow_any_decorated</span></span><a class="headerlink" href="#confval-disallow_any_decorated" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>禁止在装饰器转换后其签名中包含 <code class="docutils literal notranslate"><span class="pre">Any</span></code> 的函数。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-disallow_any_explicit">
<span class="sig-name descname"><span class="pre">disallow_any_explicit</span></span><a class="headerlink" href="#confval-disallow_any_explicit" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>禁止在类型位置（例如类型注解和泛型类型参数）中显式使用 <code class="docutils literal notranslate"><span class="pre">Any</span></code>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-disallow_any_generics">
<span class="sig-name descname"><span class="pre">disallow_any_generics</span></span><a class="headerlink" href="#confval-disallow_any_generics" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>禁止使用未指定显式类型参数的泛型类型。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-disallow_subclassing_any">
<span class="sig-name descname"><span class="pre">disallow_subclassing_any</span></span><a class="headerlink" href="#confval-disallow_subclassing_any" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>禁止对类型为 <code class="docutils literal notranslate"><span class="pre">Any</span></code> 的值进行子类化。</p>
</dd></dl>

</section>
<section id="untyped-definitions-and-calls">
<h2>未类型定义和调用(Untyped definitions and calls)<a class="headerlink" href="#untyped-definitions-and-calls" title="Link to this heading">¶</a></h2>
<p>有关更多信息，请参见命令行文档的 <a class="reference internal" href="command_line.html#untyped-definitions-and-calls"><span class="std std-ref">未类型定义和调用</span></a> 部分。</p>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-disallow_untyped_calls">
<span class="sig-name descname"><span class="pre">disallow_untyped_calls</span></span><a class="headerlink" href="#confval-disallow_untyped_calls" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>禁止从具有类型注解的函数调用没有类型注解的函数。请注意，当在模块选项中使用时，它在指定的模块内启用/禁用此检查，而不是对来自该模块的函数，例如如下配置：</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[mypy]</span>
<span class="na">disallow_untyped_calls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">True</span>

<span class="k">[mypy-some.library.*]</span>
<span class="na">disallow_untyped_calls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">False</span>
</pre></div>
</div>
<p>将在 <code class="docutils literal notranslate"><span class="pre">some.library</span></code> 内禁用此检查，而不是对导入 <code class="docutils literal notranslate"><span class="pre">some.library</span></code> 的代码。如果您想选择性地禁用对所有导入 <code class="docutils literal notranslate"><span class="pre">some.library</span></code> 的代码的此检查，应该使用 <a class="reference internal" href="#confval-untyped_calls_exclude"><code class="xref std std-confval docutils literal notranslate"><span class="pre">untyped_calls_exclude</span></code></a>，例如：</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[mypy]</span>
<span class="na">disallow_untyped_calls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">True</span>
<span class="na">untyped_calls_exclude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">some.library</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-untyped_calls_exclude">
<span class="sig-name descname"><span class="pre">untyped_calls_exclude</span></span><a class="headerlink" href="#confval-untyped_calls_exclude" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>comma-separated list of strings</p>
</dd>
</dl>
<p>选择性地排除在特定包、模块和类中定义的函数和方法，以免触发 <a class="reference internal" href="#confval-disallow_untyped_calls"><code class="xref std std-confval docutils literal notranslate"><span class="pre">disallow_untyped_calls</span></code></a> 的作用。这也适用于包的所有子模块（即给定前缀下的所有内容）。注意，此选项不支持逐文件配置，排除列表在全局范围内为您所有代码定义。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-disallow_untyped_defs">
<span class="sig-name descname"><span class="pre">disallow_untyped_defs</span></span><a class="headerlink" href="#confval-disallow_untyped_defs" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>禁止定义没有类型注解或具有不完整类型注解的函数（是 <a class="reference internal" href="#confval-disallow_incomplete_defs"><code class="xref std std-confval docutils literal notranslate"><span class="pre">disallow_incomplete_defs</span></code></a> 的超集）。</p>
<p>例如，它会对 <code class="code docutils literal notranslate"><span class="pre">def</span> <span class="pre">f(a,</span> <span class="pre">b)</span></code> 和 <code class="code docutils literal notranslate"><span class="pre">def</span> <span class="pre">f(a:</span> <span class="pre">int,</span> <span class="pre">b)</span></code> 报告错误。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-disallow_incomplete_defs">
<span class="sig-name descname"><span class="pre">disallow_incomplete_defs</span></span><a class="headerlink" href="#confval-disallow_incomplete_defs" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>禁止定义具有不完整类型注解的函数，同时仍然允许完全没有注解的定义。</p>
<p>例如，它会对 <code class="code docutils literal notranslate"><span class="pre">def</span> <span class="pre">f(a:</span> <span class="pre">int,</span> <span class="pre">b)</span></code> 报告错误，但不会对 <code class="code docutils literal notranslate"><span class="pre">def</span> <span class="pre">f(a,</span> <span class="pre">b)</span></code> 报告错误。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-check_untyped_defs">
<span class="sig-name descname"><span class="pre">check_untyped_defs</span></span><a class="headerlink" href="#confval-check_untyped_defs" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>对没有类型注解的函数内部进行类型检查。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-disallow_untyped_decorators">
<span class="sig-name descname"><span class="pre">disallow_untyped_decorators</span></span><a class="headerlink" href="#confval-disallow_untyped_decorators" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>每当具有类型注解的函数被没有注解的装饰器装饰时，报告错误。</p>
</dd></dl>

</section>
<section id="none-optional-none-and-optional-handling">
<span id="config-file-none-and-optional-handling"></span><h2>None 和 Optional 处理(None and Optional handling)<a class="headerlink" href="#none-optional-none-and-optional-handling" title="Link to this heading">¶</a></h2>
<p>有关更多信息，请参见命令行文档的 <a class="reference internal" href="command_line.html#none-and-optional-handling"><span class="std std-ref">None 和 Optional 处理</span></a> 部分。</p>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-implicit_optional">
<span class="sig-name descname"><span class="pre">implicit_optional</span></span><a class="headerlink" href="#confval-implicit_optional" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>使 mypy 将具有 <code class="docutils literal notranslate"><span class="pre">None</span></code> 默认值的参数视为具有隐式可选类型( <code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">|</span> <span class="pre">None</span></code> )。</p>
<p><strong>注意：</strong> 在 mypy 版本 0.980 及之前版本中，这一选项默认为 True。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-strict_optional">
<span class="sig-name descname"><span class="pre">strict_optional</span></span><a class="headerlink" href="#confval-strict_optional" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>True</p>
</dd>
</dl>
<p>实质上禁用对可选类型和 <code class="docutils literal notranslate"><span class="pre">None</span></code> 值的检查。启用此选项后，mypy 通常不会检查 <code class="docutils literal notranslate"><span class="pre">None</span></code> 值的使用——它被视为与每种类型兼容。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p><code class="docutils literal notranslate"><span class="pre">strict_optional</span> <span class="pre">=</span> <span class="pre">false</span></code> 是有害的。避免使用它，并且在完全理解其作用之前，绝对不要使用它。</p>
</div>
</dd></dl>

</section>
<section id="configuring-warnings">
<h2>配置警告(Configuring warnings)<a class="headerlink" href="#configuring-warnings" title="Link to this heading">¶</a></h2>
<p>有关更多信息，请参见命令行文档的 <a class="reference internal" href="command_line.html#configuring-warnings"><span class="std std-ref">配置警告</span></a> 部分。</p>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-warn_redundant_casts">
<span class="sig-name descname"><span class="pre">warn_redundant_casts</span></span><a class="headerlink" href="#confval-warn_redundant_casts" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>针对将表达式转换为其推断类型的情况发出警告。</p>
<p>此选项仅可在全局部分( <code class="docutils literal notranslate"><span class="pre">[mypy]</span></code> )中设置。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-warn_unused_ignores">
<span class="sig-name descname"><span class="pre">warn_unused_ignores</span></span><a class="headerlink" href="#confval-warn_unused_ignores" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>针对不必要的 <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">type:</span> <span class="pre">ignore</span></code> 注释发出警告。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-warn_no_return">
<span class="sig-name descname"><span class="pre">warn_no_return</span></span><a class="headerlink" href="#confval-warn_no_return" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>True</p>
</dd>
</dl>
<p>对某些执行路径缺少返回语句显示错误。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-warn_return_any">
<span class="sig-name descname"><span class="pre">warn_return_any</span></span><a class="headerlink" href="#confval-warn_return_any" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>当从声明了非 <code class="docutils literal notranslate"><span class="pre">Any</span></code> 返回类型的函数返回类型为 <code class="docutils literal notranslate"><span class="pre">Any</span></code> 的值时，显示警告。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-warn_unreachable">
<span class="sig-name descname"><span class="pre">warn_unreachable</span></span><a class="headerlink" href="#confval-warn_unreachable" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>当遇到任何经过类型分析推断为不可达或冗余的代码时，显示警告。</p>
</dd></dl>

</section>
<section id="suppressing-errors">
<h2>抑制错误(Suppressing errors)<a class="headerlink" href="#suppressing-errors" title="Link to this heading">¶</a></h2>
<p>注意：这些配置选项仅在配置文件中可用。命令行选项中没有类似功能。</p>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-ignore_errors">
<span class="sig-name descname"><span class="pre">ignore_errors</span></span><a class="headerlink" href="#confval-ignore_errors" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>忽略所有非致命错误。</p>
</dd></dl>

</section>
<section id="miscellaneous-strictness-flags">
<h2>其他严格性标志(Miscellaneous strictness flags)<a class="headerlink" href="#miscellaneous-strictness-flags" title="Link to this heading">¶</a></h2>
<p>有关更多信息，请参见命令行文档的 <a class="reference internal" href="command_line.html#miscellaneous-strictness-flags"><span class="std std-ref">杂项严格性标志</span></a> 部分。</p>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-allow_untyped_globals">
<span class="sig-name descname"><span class="pre">allow_untyped_globals</span></span><a class="headerlink" href="#confval-allow_untyped_globals" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>使 mypy 抑制因无法完全推断全局和类变量类型而导致的错误。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-allow_redefinition">
<span class="sig-name descname"><span class="pre">allow_redefinition</span></span><a class="headerlink" href="#confval-allow_redefinition" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>允许在与原始定义相同的块和嵌套级别中以任意类型重新定义变量。
这种情况下可以很有用的示例：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">items</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># &#39;items&#39; 的类型是 list[str]</span>
    <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">split</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">]</span>
    <span class="c1"># &#39;items&#39; 现在的类型是 list[list[str]]</span>
</pre></div>
</div>
<p>变量必须在重新定义之前使用：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">items</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
   <span class="n">items</span> <span class="o">=</span> <span class="s2">&quot;mypy&quot;</span>  <span class="c1"># 无效的重新定义为 str，因为变量尚未被使用</span>
   <span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
   <span class="n">items</span> <span class="o">=</span> <span class="s2">&quot;100&quot;</span>  <span class="c1"># 有效，items 现在的类型是 str</span>
   <span class="n">items</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>  <span class="c1"># 有效，items 现在的类型是 int</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-local_partial_types">
<span class="sig-name descname"><span class="pre">local_partial_types</span></span><a class="headerlink" href="#confval-local_partial_types" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>禁止从不同作用域中的两个赋值中推断 <code class="docutils literal notranslate"><span class="pre">None</span></code> 的变量类型。
在使用 <a class="reference internal" href="mypy_daemon.html#mypy-daemon"><span class="std std-ref">mypy daemon</span></a> 时，这总是隐式启用。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-disable_error_code">
<span class="sig-name descname"><span class="pre">disable_error_code</span></span><a class="headerlink" href="#confval-disable_error_code" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>comma-separated list of strings</p>
</dd>
</dl>
<p>允许全局禁用一个或多个错误代码。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-enable_error_code">
<span class="sig-name descname"><span class="pre">enable_error_code</span></span><a class="headerlink" href="#confval-enable_error_code" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>comma-separated list of strings</p>
</dd>
</dl>
<p>允许全局启用一个或多个错误代码。</p>
<p>注意：此选项将覆盖 disable_error_code 选项中的禁用错误代码。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-implicit_reexport">
<span class="sig-name descname"><span class="pre">implicit_reexport</span></span><a class="headerlink" href="#confval-implicit_reexport" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>True</p>
</dd>
</dl>
<p>默认情况下，导入到模块的值被视为导出，并且 mypy 允许其他模块导入它们。
当为 false 时，mypy 不会重新导出，除非项目使用 from-as 导入或包含在 <code class="docutils literal notranslate"><span class="pre">__all__</span></code> 中。
注意，mypy 将存根文件视为始终禁用此功能。例如：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 这不会重新导出该值</span>
<span class="kn">from</span> <span class="nn">foo</span> <span class="kn">import</span> <span class="n">bar</span>
<span class="c1"># 这将重新导出为 bar 并允许其他模块导入它</span>
<span class="kn">from</span> <span class="nn">foo</span> <span class="kn">import</span> <span class="n">bar</span> <span class="k">as</span> <span class="n">bar</span>
<span class="c1"># 这也将重新导出 bar</span>
<span class="kn">from</span> <span class="nn">foo</span> <span class="kn">import</span> <span class="n">bar</span>
<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bar&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-strict_concatenate">
<span class="sig-name descname"><span class="pre">strict_concatenate</span></span><a class="headerlink" href="#confval-strict_concatenate" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>使通过 <code class="docutils literal notranslate"><span class="pre">Concatenate</span></code> 添加的参数真正只能是位置参数。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-strict_equality">
<span class="sig-name descname"><span class="pre">strict_equality</span></span><a class="headerlink" href="#confval-strict_equality" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>禁止非重叠类型之间的相等检查、身份检查和容器检查。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-strict">
<span class="sig-name descname"><span class="pre">strict</span></span><a class="headerlink" href="#confval-strict" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>启用所有可选的错误检查标志。你可以在完整的 <a class="reference internal" href="command_line.html#cmdoption-mypy-h"><code class="xref std std-option docutils literal notranslate"><span class="pre">mypy</span> <span class="pre">--help</span></code></a> 输出中查看严格模式启用的标志列表。</p>
<p>注意：由 <a class="reference internal" href="#confval-strict"><code class="xref std std-confval docutils literal notranslate"><span class="pre">strict</span></code></a> 启用的确切标志列表可能会随时间变化。</p>
</dd></dl>

</section>
<section id="configuring-error-messages">
<h2>配置错误消息(Configuring error messages)<a class="headerlink" href="#configuring-error-messages" title="Link to this heading">¶</a></h2>
<p>有关更多信息，请参见命令行文档的 <a class="reference internal" href="command_line.html#configuring-error-messages"><span class="std std-ref">配置错误消息</span></a> 部分。</p>
<p>这些选项只能在全局部分( <code class="docutils literal notranslate"><span class="pre">[mypy]</span></code> )中设置。</p>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-show_error_context">
<span class="sig-name descname"><span class="pre">show_error_context</span></span><a class="headerlink" href="#confval-show_error_context" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>在每个错误前加上相关的上下文信息。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-show_column_numbers">
<span class="sig-name descname"><span class="pre">show_column_numbers</span></span><a class="headerlink" href="#confval-show_column_numbers" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>在错误消息中显示列号。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-show_error_code_links">
<span class="sig-name descname"><span class="pre">show_error_code_links</span></span><a class="headerlink" href="#confval-show_error_code_links" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>显示指向相应错误代码的文档链接。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-hide_error_codes">
<span class="sig-name descname"><span class="pre">hide_error_codes</span></span><a class="headerlink" href="#confval-hide_error_codes" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>在错误消息中隐藏错误代码。有关更多信息，请参见 <a class="reference internal" href="error_codes.html#error-codes"><span class="std std-ref">错误代码(Error codes)</span></a>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-pretty">
<span class="sig-name descname"><span class="pre">pretty</span></span><a class="headerlink" href="#confval-pretty" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>在错误消息中使用视觉上更优雅的输出：使用软换行，显示源代码片段，并显示错误位置标记。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-color_output">
<span class="sig-name descname"><span class="pre">color_output</span></span><a class="headerlink" href="#confval-color_output" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>True</p>
</dd>
</dl>
<p>显示带有颜色的错误消息。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-error_summary">
<span class="sig-name descname"><span class="pre">error_summary</span></span><a class="headerlink" href="#confval-error_summary" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>True</p>
</dd>
</dl>
<p>在错误消息后显示简短的摘要行。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-show_absolute_path">
<span class="sig-name descname"><span class="pre">show_absolute_path</span></span><a class="headerlink" href="#confval-show_absolute_path" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>显示文件的绝对路径。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-force_uppercase_builtins">
<span class="sig-name descname"><span class="pre">force_uppercase_builtins</span></span><a class="headerlink" href="#confval-force_uppercase_builtins" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>在错误消息中始终使用 <code class="docutils literal notranslate"><span class="pre">List</span></code> 而不是 <code class="docutils literal notranslate"><span class="pre">list</span></code>，
即使在 Python 3.9+ 中也是如此。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-force_union_syntax">
<span class="sig-name descname"><span class="pre">force_union_syntax</span></span><a class="headerlink" href="#confval-force_union_syntax" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>在错误消息中始终使用 <code class="docutils literal notranslate"><span class="pre">Union[]</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Optional[]</span></code> 来表示联合类型
（而不是 <code class="docutils literal notranslate"><span class="pre">|</span></code> 操作符），即使在 Python 3.10+ 中也是如此。</p>
</dd></dl>

</section>
<section id="incremental-mode">
<h2>增量模式(Incremental mode)<a class="headerlink" href="#incremental-mode" title="Link to this heading">¶</a></h2>
<p>这些选项只能在全局部分( <code class="docutils literal notranslate"><span class="pre">[mypy]</span></code> )中设置。</p>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-incremental">
<span class="sig-name descname"><span class="pre">incremental</span></span><a class="headerlink" href="#confval-incremental" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>True</p>
</dd>
</dl>
<p>启用 <a class="reference internal" href="command_line.html#incremental"><span class="std std-ref">增量模式</span></a>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-cache_dir">
<span class="sig-name descname"><span class="pre">cache_dir</span></span><a class="headerlink" href="#confval-cache_dir" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">.mypy_cache</span></code></p>
</dd>
</dl>
<p>指定 mypy 存储增量缓存信息的位置。
用户主目录和环境变量将被展开。
此设置将被 <code class="docutils literal notranslate"><span class="pre">MYPY_CACHE_DIR</span></code> 环境变量覆盖。</p>
<p>注意，只有在启用增量模式时才会读取缓存，
但总是会写入缓存，除非值设置为 <code class="docutils literal notranslate"><span class="pre">/dev/null</span></code>
（UNIX）或 <code class="docutils literal notranslate"><span class="pre">nul</span></code> （Windows）。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-sqlite_cache">
<span class="sig-name descname"><span class="pre">sqlite_cache</span></span><a class="headerlink" href="#confval-sqlite_cache" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>使用 <a class="reference external" href="https://www.sqlite.org/">SQLite</a> 数据库来存储缓存。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-cache_fine_grained">
<span class="sig-name descname"><span class="pre">cache_fine_grained</span></span><a class="headerlink" href="#confval-cache_fine_grained" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>为 mypy 守护进程在缓存中包含细粒度的依赖信息。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-skip_version_check">
<span class="sig-name descname"><span class="pre">skip_version_check</span></span><a class="headerlink" href="#confval-skip_version_check" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>使 mypy 使用增量缓存数据，即使它是由不同版本的 mypy 生成的。
（默认情况下，mypy 将执行版本检查，并在缓存由旧版本的 mypy 写入时重新生成缓存。）</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-skip_cache_mtime_checks">
<span class="sig-name descname"><span class="pre">skip_cache_mtime_checks</span></span><a class="headerlink" href="#confval-skip_cache_mtime_checks" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>跳过基于 mtime 的缓存内部一致性检查。</p>
</dd></dl>

</section>
<section id="advanced-options">
<h2>高级选项(Advanced options)<a class="headerlink" href="#advanced-options" title="Link to this heading">¶</a></h2>
<p>这些选项只能在全局部分( <code class="docutils literal notranslate"><span class="pre">[mypy]</span></code> )中设置。</p>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-plugins">
<span class="sig-name descname"><span class="pre">plugins</span></span><a class="headerlink" href="#confval-plugins" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>comma-separated list of strings</p>
</dd>
</dl>
<p>逗号分隔的 mypy 插件列表。请参见 <a class="reference internal" href="extending_mypy.html#extending-mypy-using-plugins"><span class="std std-ref">使用插件扩展 mypy(Extending mypy using plugins)</span></a>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-pdb">
<span class="sig-name descname"><span class="pre">pdb</span></span><a class="headerlink" href="#confval-pdb" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>在致命错误时调用 <a class="reference external" href="https://docs.python.org/zh-cn/3/library/pdb.html#module-pdb" title="（在 Python v3.13）"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pdb</span></code></a>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-show_traceback">
<span class="sig-name descname"><span class="pre">show_traceback</span></span><a class="headerlink" href="#confval-show_traceback" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>在致命错误时显示回溯信息。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-raise_exceptions">
<span class="sig-name descname"><span class="pre">raise_exceptions</span></span><a class="headerlink" href="#confval-raise_exceptions" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>在致命错误时引发异常。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-custom_typing_module">
<span class="sig-name descname"><span class="pre">custom_typing_module</span></span><a class="headerlink" href="#confval-custom_typing_module" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
<p>指定一个自定义模块，用作 <a class="reference external" href="https://docs.python.org/zh-cn/3/library/typing.html#module-typing" title="（在 Python v3.13）"><code class="xref py py-mod docutils literal notranslate"><span class="pre">typing</span></code></a> 模块的替代。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-custom_typeshed_dir">
<span class="sig-name descname"><span class="pre">custom_typeshed_dir</span></span><a class="headerlink" href="#confval-custom_typeshed_dir" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
<p>指定 mypy 查找标准库 typeshed 存根的目录，而不是随 mypy 一起提供的 typeshed。
这主要旨在简化在提交变更之前测试 typeshed 变更的过程，同时也允许您使用 forked 版本的 typeshed。</p>
<p>用户主目录和环境变量将被展开。</p>
<p>注意，这不会影响第三方库的存根。要测试第三方存根，
例如尝试 <code class="docutils literal notranslate"><span class="pre">MYPYPATH=stubs/six</span> <span class="pre">mypy</span> <span class="pre">...</span></code>。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-warn_incomplete_stub">
<span class="sig-name descname"><span class="pre">warn_incomplete_stub</span></span><a class="headerlink" href="#confval-warn_incomplete_stub" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>发出缺少类型注解的警告，仅在与 <a class="reference internal" href="#confval-disallow_untyped_defs"><code class="xref std std-confval docutils literal notranslate"><span class="pre">disallow_untyped_defs</span></code></a> 或 <a class="reference internal" href="#confval-disallow_incomplete_defs"><code class="xref std std-confval docutils literal notranslate"><span class="pre">disallow_incomplete_defs</span></code></a> 结合使用时相关。</p>
</dd></dl>

</section>
<section id="report-generation">
<h2>报告生成(Report generation)<a class="headerlink" href="#report-generation" title="Link to this heading">¶</a></h2>
<p>如果设置了这些选项，mypy 将会在指定的目录中生成指定格式的报告。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>生成报告会禁用增量模式，并可能显著降低您的工作流程效率。建议仅在特定运行时（例如在 CI 中）启用报告。</p>
</div>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-any_exprs_report">
<span class="sig-name descname"><span class="pre">any_exprs_report</span></span><a class="headerlink" href="#confval-any_exprs_report" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
<p>使 mypy 生成一份文本文件报告，记录您代码库中存在多少类型为 <code class="docutils literal notranslate"><span class="pre">Any</span></code> 的表达式。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-cobertura_xml_report">
<span class="sig-name descname"><span class="pre">cobertura_xml_report</span></span><a class="headerlink" href="#confval-cobertura_xml_report" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
<p>使 mypy 生成一份 Cobertura XML 类型检查覆盖报告。</p>
<p>要生成此报告，您必须手动安装 <a class="reference external" href="https://pypi.org/project/lxml/">lxml</a> 库或使用 setuptools 附加选项
<code class="docutils literal notranslate"><span class="pre">mypy[reports]</span></code> 指定 mypy 安装。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-html_report-xslt_html_report">
<span class="sig-name descname"><span class="pre">html_report</span> <span class="pre">/</span> <span class="pre">xslt_html_report</span></span><a class="headerlink" href="#confval-html_report-xslt_html_report" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
<p>使 mypy 生成一份 HTML 类型检查覆盖报告。</p>
<p>要生成此报告，您必须手动安装 <a class="reference external" href="https://pypi.org/project/lxml/">lxml</a> 库或使用 setuptools 附加选项
<code class="docutils literal notranslate"><span class="pre">mypy[reports]</span></code> 指定 mypy 安装。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-linecount_report">
<span class="sig-name descname"><span class="pre">linecount_report</span></span><a class="headerlink" href="#confval-linecount_report" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
<p>使 mypy 生成一份文本文件报告，记录您代码库中已类型注解和未类型注解的函数及行数。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-linecoverage_report">
<span class="sig-name descname"><span class="pre">linecoverage_report</span></span><a class="headerlink" href="#confval-linecoverage_report" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
<p>使 mypy 生成一份 JSON 文件，将每个源文件的绝对文件名映射到属于该文件中已类型注解函数的行号列表。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-lineprecision_report">
<span class="sig-name descname"><span class="pre">lineprecision_report</span></span><a class="headerlink" href="#confval-lineprecision_report" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
<p>使 mypy 生成一份平面文本文件报告，包含每个模块的统计信息，例如经过类型检查的行数等。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-txt_report-xslt_txt_report">
<span class="sig-name descname"><span class="pre">txt_report</span> <span class="pre">/</span> <span class="pre">xslt_txt_report</span></span><a class="headerlink" href="#confval-txt_report-xslt_txt_report" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
<p>使 mypy 生成一份文本文件类型检查覆盖报告。</p>
<p>要生成此报告，您必须手动安装 <a class="reference external" href="https://pypi.org/project/lxml/">lxml</a> 库或使用 setuptools 附加选项
<code class="docutils literal notranslate"><span class="pre">mypy[reports]</span></code> 指定 mypy 安装。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-xml_report">
<span class="sig-name descname"><span class="pre">xml_report</span></span><a class="headerlink" href="#confval-xml_report" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
<p>使 mypy 生成一份 XML 类型检查覆盖报告。</p>
<p>要生成此报告，您必须手动安装 <a class="reference external" href="https://pypi.org/project/lxml/">lxml</a> 库或使用 setuptools 附加选项
<code class="docutils literal notranslate"><span class="pre">mypy[reports]</span></code>。</p>
</dd></dl>

</section>
<section id="miscellaneous">
<h2>其他(Miscellaneous)<a class="headerlink" href="#miscellaneous" title="Link to this heading">¶</a></h2>
<p>这些选项只能在全局部分( <code class="docutils literal notranslate"><span class="pre">[mypy]</span></code> )中设置。</p>
<dl class="std confval">
<dt class="sig sig-object std" id="confval-junit_xml">
<span class="sig-name descname"><span class="pre">junit_xml</span></span><a class="headerlink" href="#confval-junit_xml" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
<p>使 mypy 生成一份包含类型检查结果的 JUnit XML 测试结果文档。这可以使 mypy 更容易与持续集成（CI）工具集成。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-scripts_are_modules">
<span class="sig-name descname"><span class="pre">scripts_are_modules</span></span><a class="headerlink" href="#confval-scripts_are_modules" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>使脚本 <code class="docutils literal notranslate"><span class="pre">x</span></code> 成为模块 <code class="docutils literal notranslate"><span class="pre">x</span></code>，而不是 <code class="docutils literal notranslate"><span class="pre">__main__</span></code>。这在单次运行中检查多个脚本时非常有用。</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-warn_unused_configs">
<span class="sig-name descname"><span class="pre">warn_unused_configs</span></span><a class="headerlink" href="#confval-warn_unused_configs" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>boolean</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>False</p>
</dd>
</dl>
<p>警告配置文件中与调用 mypy 时处理的文件不匹配的每个模块部分。
（这需要使用 <a class="reference internal" href="#confval-incremental"><code class="xref std std-confval docutils literal notranslate"><span class="pre">incremental</span> <span class="pre">=</span> <span class="pre">False</span></code></a> 关闭增量模式。）</p>
</dd></dl>

<dl class="std confval">
<dt class="sig sig-object std" id="confval-verbosity">
<span class="sig-name descname"><span class="pre">verbosity</span></span><a class="headerlink" href="#confval-verbosity" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>integer</p>
</dd>
<dt class="field-even">Default<span class="colon">:</span></dt>
<dd class="field-even"><p>0</p>
</dd>
</dl>
<p>控制将生成多少调试输出。数字越高，输出越详细。</p>
</dd></dl>

</section>
<section id="pyproject-toml-using-a-pyproject-toml-file">
<span id="using-a-pyproject-toml"></span><h2>使用 pyproject.toml 文件(Using a pyproject.toml file)<a class="headerlink" href="#pyproject-toml-using-a-pyproject-toml-file" title="Link to this heading">¶</a></h2>
<p>可以使用 <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> 文件（如 <a class="reference external" href="https://www.python.org/dev/peps/pep-0518/">PEP 518</a> 所指定），而不是使用 <code class="docutils literal notranslate"><span class="pre">mypy.ini</span></code> 文件。以下是一些注意事项：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[mypy]</span></code> 部分应在其名称前加上 <code class="docutils literal notranslate"><span class="pre">tool.</span></code>：</p>
<ul>
<li><p>即，<code class="docutils literal notranslate"><span class="pre">[mypy]</span></code> 应变为 <code class="docutils literal notranslate"><span class="pre">[tool.mypy]</span></code></p></li>
</ul>
</li>
<li><p>模块特定部分应移动到 <code class="docutils literal notranslate"><span class="pre">[[tool.mypy.overrides]]</span></code> 部分中：</p>
<ul>
<li><p>例如，<code class="docutils literal notranslate"><span class="pre">[mypy-packagename]</span></code> 应变为：</p></li>
</ul>
</li>
</ul>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[[tool.mypy.overrides]]</span>
<span class="n">module</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;packagename&#39;</span>
<span class="p">...</span>
</pre></div>
</div>
<ul class="simple">
<li><p>多模块特定部分可以移动到单个 <code class="docutils literal notranslate"><span class="pre">[[tool.mypy.overrides]]</span></code> 部分，模块属性设置为模块数组：</p>
<ul>
<li><p>例如，<code class="docutils literal notranslate"><span class="pre">[mypy-packagename,packagename2]</span></code> 应变为：</p></li>
</ul>
</li>
</ul>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[[tool.mypy.overrides]]</span>
<span class="n">module</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s1">&#39;packagename&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="s1">&#39;packagename2&#39;</span>
<span class="p">]</span>
<span class="p">...</span>
</pre></div>
</div>
<ul class="simple">
<li><p>与 <code class="docutils literal notranslate"><span class="pre">ini</span></code> 文件相比，在 <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> 文件中对值应注意以下几点：</p>
<ul>
<li><p>字符串必须用双引号括起来，如果字符串包含特殊字符，则可以用单引号</p></li>
<li><p>布尔值应全部为小写</p></li>
</ul>
</li>
</ul>
<p>有关 <code class="docutils literal notranslate"><span class="pre">toml</span></code> 文件中允许的内容的更多详细信息，请参阅 <a class="reference external" href="https://toml.io/">TOML Documentation</a> 。有关 <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> 文件布局和结构的更多信息，请参阅 <a class="reference external" href="https://www.python.org/dev/peps/pep-0518/">PEP 518</a> 。</p>
</section>
<section id="pyproject-toml-example">
<h2>pyproject.toml 示例(Example)<a class="headerlink" href="#pyproject-toml-example" title="Link to this heading">¶</a></h2>
<p>以下是一个 <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> 文件的示例。要使用此配置文件，请将其放置在您的仓库根目录（或附加到现有 <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> 文件的末尾）并运行 mypy。</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="c1"># mypy 全局选项：</span>

<span class="k">[tool.mypy]</span>
<span class="n">python_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;2.7&quot;</span>
<span class="n">warn_return_any</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">warn_unused_configs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">exclude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s1">&#39;^file1\.py$&#39;</span><span class="p">,</span><span class="w">  </span><span class="c1"># TOML 字面字符串（单引号，无需转义）</span>
<span class="w">    </span><span class="s2">&quot;^file2</span><span class="se">\\</span><span class="s2">.py$&quot;</span><span class="p">,</span><span class="w">  </span><span class="c1"># TOML 基本字符串（双引号，反斜杠和其他字符需要转义）</span>
<span class="p">]</span>

<span class="c1"># mypy 每模块选项：</span>

<span class="k">[[tool.mypy.overrides]]</span>
<span class="n">module</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;mycode.foo.*&quot;</span>
<span class="n">disallow_untyped_defs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>

<span class="k">[[tool.mypy.overrides]]</span>
<span class="n">module</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;mycode.bar&quot;</span>
<span class="n">warn_return_any</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>

<span class="k">[[tool.mypy.overrides]]</span>
<span class="n">module</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;somelibrary&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="s2">&quot;some_other_library&quot;</span>
<span class="p">]</span>
<span class="n">ignore_missing_imports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="inline_config.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">内联配置(Inline configuration)</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="command_line.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">mypy命令行(command line)</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2012-2022 Jukka Lehtosalo and mypy contributors
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">mypy 配置文件(mypy configuration file)</a><ul>
<li><a class="reference internal" href="#config-file-format">配置文件格式(Config file format)</a></li>
<li><a class="reference internal" href="#per-module-and-global-options">单个模块和全局选项(Per-module and global options)</a></li>
<li><a class="reference internal" href="#inverting-option-values">反转选项值(Inverting option values)</a></li>
<li><a class="reference internal" href="#mypy-ini-example"><code class="docutils literal notranslate"><span class="pre">mypy.ini</span></code> 示例 (Example)</a></li>
<li><a class="reference internal" href="#import-discovery">导入发现(Import discovery)</a></li>
<li><a class="reference internal" href="#platform-configuration">平台配置(Platform configuration)</a></li>
<li><a class="reference internal" href="#disallow-dynamic-typing">禁止动态类型(Disallow dynamic typing)</a></li>
<li><a class="reference internal" href="#untyped-definitions-and-calls">未类型定义和调用(Untyped definitions and calls)</a></li>
<li><a class="reference internal" href="#none-optional-none-and-optional-handling">None 和 Optional 处理(None and Optional handling)</a></li>
<li><a class="reference internal" href="#configuring-warnings">配置警告(Configuring warnings)</a></li>
<li><a class="reference internal" href="#suppressing-errors">抑制错误(Suppressing errors)</a></li>
<li><a class="reference internal" href="#miscellaneous-strictness-flags">其他严格性标志(Miscellaneous strictness flags)</a></li>
<li><a class="reference internal" href="#configuring-error-messages">配置错误消息(Configuring error messages)</a></li>
<li><a class="reference internal" href="#incremental-mode">增量模式(Incremental mode)</a></li>
<li><a class="reference internal" href="#advanced-options">高级选项(Advanced options)</a></li>
<li><a class="reference internal" href="#report-generation">报告生成(Report generation)</a></li>
<li><a class="reference internal" href="#miscellaneous">其他(Miscellaneous)</a></li>
<li><a class="reference internal" href="#pyproject-toml-using-a-pyproject-toml-file">使用 pyproject.toml 文件(Using a pyproject.toml file)</a></li>
<li><a class="reference internal" href="#pyproject-toml-example">pyproject.toml 示例(Example)</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=48a57134"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="_static/translations.js?v=beaddf03"></script>
    </body>
</html>